.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "DENV" "1" "Aug 2024" "denv" "User Manual"
.hy
.SH NAME
.PP
denv init
.SH SYNOPSIS
.PP
\f[B]denv init\f[R] [help|-h|--help] IMAGE [WORKSPACE]
[--no-gitignore] [--clean-env|--no-copy-all] [--force]
[--name NAME] [--no-mkdir|--mkdir] [--no-over|--over]
[--no-host-home|--host-home]
.SH OPTIONS
.PP
\f[B]\f[CB]--help\f[B]\f[R], \f[B]\f[CB]-h\f[B]\f[R], or
\f[B]\f[CB]help\f[B]\f[R] print a short help message for
\f[B]\f[CB]denv\f[B]\f[R] or one of its sub commands
.PP
\f[B]\f[CB]--no-gitignore\f[B]\f[R] do not generate a gitignore file
when setting up a new denv configuration
.PP
\f[B]\f[CB]--clean-env\f[B]\f[R] or \f[B]\f[CB]--no-copy-all\f[B]\f[R]
do not enable copying of all host environment variables within the new
denv.
Later activation (or deactivation) of copying all host environment
variables can be done with \f[B]\f[CB]denv config env all\f[B]\f[R] See
\f[B]denv-config(1)\f[R] for details on
\f[B]\f[CB]denv config\f[B]\f[R].
.PP
\f[B]\f[CB]--force\f[B]\f[R] forces re-initialization of a denv even if
the current workspace has one
.PP
\f[B]\f[CB]--name\f[B]\f[R] sets the name for the denv workspace that is
being initialized to NAME
.PP
\f[B]\f[CB]--[no-]mkdir\f[B]\f[R] don't prompt about if denv can create the
workspace directory. Just do it (--mkdir) or not (--no-mkdir).
.PP
\f[B]\f[CB]--[no-]over\f[B]\f[R] don't prompt about if denv should overwrite
a configuration within the workspace or override a configuration in a parent directory.
Just do it (--over) or not (--no-over).
.PP
\f[B]\f[CB]--[no-]host-home\f[B]\f[R] don't prompt about if denv should allow a workspace
to be the host's home directory.
Just do it (--host-home) or not (--no-host-home).
Since the denv and the host environment can be very different, having them share a home
directory and the resulting configuration files (e.g. \f[C].bashrc\f[R]) is generally a bad
idea and can lead to a lot of confusing behavior.
.SH ARGUMENTS
.PP
\f[B]\f[CB]IMAGE\f[B]\f[R] the name of a container image to use when
starting a container to host the developer environment
.PP
\f[B]\f[CB]WORKSPACE\f[B]\f[R] the directory where the environment
should be stored and configured, used by default as the home directory
within the developer environment so that the environment can also have
its own shell configuration files and \f[C]\[ti]/.local\f[R] paths.
If not provided, we just use the current working directory.
If provided, we make sure it exists, enter it and then continue.
If \f[B]\f[CB]WORKSPACE\f[B]\f[R] already has a denv (or one of its
parent directories has a denv), then the user is prompted on if they
wish to overwrite (in the case that \f[B]\f[CB]WORKSPACE\f[B]\f[R] itself
is a denv) or override (otherwise) the already-existing denv.
.SH EXAMPLES
.PP
Print the command line help for \f[B]\f[CB]denv init\f[B]\f[R] without
making any edits to the filesystem or beginning the process of
configuring a new denv.
.IP
.nf
\f[C]
denv init help
\f[R]
.fi
.PP
Create a new denv based off the python:3.11 container image within the
current directory, allowing all host environment variables to be copied
into the denv when running.
.IP
.nf
\f[C]
denv init python:3.11
\f[R]
.fi
.PP
Same as above, but do \f[I]not\f[R] allow the host environment variables
to be copied into the denv.
.IP
.nf
\f[C]
denv init --clean-env python:3.11
\f[R]
.fi
.PP
Create a new denv based off the python:3.11 container image and set its
name to \[lq]py311\[rq] rather than the workspace directory\[cq]s name.
.IP
.nf
\f[C]
denv init python:3.11 --name py311
\f[R]
.fi
.PP
Create a new denv in some other location besides the current directory.
Since the directory has the same name as above, the denvs will appear
similar even though their workspace directory (on the host) may be
different names.
.IP
.nf
\f[C]
denv init python:3.11 py311
\f[R]
.fi
.PP
As a standalone program, \f[B]denv\f[R] can be used within other scripts
and support programs.
With this in mind, a common process is to have a denv configuration that
can be ensured to exist for the rest of additional tasks.
The following example uses the --no-mkdir and --no-over flags to silently
ensure that the present working directory has the python:3.11 image configured.
.IP
.nf
\f[C]denv init --no-mkdir --no-over python:3.11\f[R]
.fi
.PP
WARNING: \f[B]denv init\f[R] does not ensure that the image is the same as
the one passed, it just quielty refused to overwrite an existing configuration
allowing it to be quickly bypassed if the configuration has already been made
or initialize the configuration if no configuration is present.
.SH DEFAULT CONFIGURATION
.PP
\f[B]denv init\f[R] makes the following choices on configuration that
can later be edited by \f[B]denv config\f[R] if the user desires.
.IP \[bu] 2
The interative shell is \f[C]/bin/bash -i\f[R], change with
\f[B]\f[CB]denv config shell PROGRAM\f[B]\f[R]
.IP \[bu] 2
No specific environment variables are copied from the host or set to
specific values, change with
\f[B]\f[CB]denv config env copy VAR[=VAL]\f[B]\f[R].
The denv either copies all host environment variables (the default) or
none (with \f[C]--clean-env\f[R]).
.IP \[bu] 2
No extra diretories are mounted into the denv (besides those
automatically mounted by the underlying container runner,
e.g.\ apptainer auto-mounts \f[C]/tmp\f[R]), update with
\f[B]\f[CB]denv config mounts DIR\f[B]\f[R].
.IP \[bu] 2
The denv is connected to the host\[cq]s network, disable with
\f[B]\f[CB]denv config network off\f[B]\f[R].
.SH SEE ALSO
.PP
\f[B]denv(1)\f[R], \f[B]denv-config(1)\f[R], \f[B]denv-check(1)\f[R]
